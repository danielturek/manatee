from:	Jeffrey Hostetler <falafelbot2@gmail.com

Hello,

I have two questions related to a model I'm hoping to implement in NIMBLE.  The first question regards whether I'll eventually be able to implement the full model and the second deals with sampling issues I'm having already with a partial version of the model.  

1) This model involves estimating fractions of manatee carcasses that go into six categories, while accounting for uncertainty due to a seventh "undetermined" category (which might have different true fractions than the determined carcasses).  It handles this part by having two baseline fractions: one for the undetermined and one for the combined determined and undetermined (total), each with a vague Dirichlet prior.  The undetermined carcasses due to a cause are generated from a multinomial, with the undetermined fractions and the number of undetermined carcasses (for that year, region, etc.).  The total carcasses due to a cause is both the sum of the determined and undetermined carcasses from that cause, and a multinomial realization from the total fractions and carcasses.  Because this variable has both a deterministic and stochastic definition, I have not been able to implement this model in traditional BUGS languages such as JAGS.  I can implement it in PyMC, using a Potential class for the multinomial likelihood of this variable.  But I'm having convergence problems in PyMC2 and running into bugs in PyMC3.  So I was wondering if there was a way to implement it in NIMBLE, perhaps through one of the llFunction samplers.

2) The model also includes changes in the fractions during unusual mortality events (UMEs), where the mortality due to a specific cause goes up.  The baseline total mortality is an input to the model, as are the years and situations where UMEs may happen.  The baseline fractions (total and sometimes undetermined) are modified by an additional fraction factor, which is a deterministic function of the baseline total mortality and the additional mortality rate.  The additional mortality rate, in turn, is distributed as uniform.  I've tried implementing a partial version of this model, where I model the determined fractions instead of the total.  However, for any version of the model I've tried where I modify the year-specific fractions for UMEs, the baseline fractions don't get sampled, and instead stay at their initial values.  I'm using an RW_block sampler on the baseline fractions.  Any suggestions on how to get NIMBLE to sample this parameter?
